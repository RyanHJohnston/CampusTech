<!-- LAPTOPS PRODUCT LIST PAGE -->
<!DOCTYPE>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" >
        <!-- media="all" th:href="@{/index.css}" -->
        <title>Laptops</title>
        <!-- THIS IS NEEDED IN EVERY HTML HEADER FOR BOOTSTRAP AND JQUERY TO WORK
        -->
        <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
    </head>
    <body>

        <div class="container-fluid p-5 bg-primary text-white text-center">
            <h1>Student Tech Store</h1>
            <p>The best quality technology for college students just like you.</p>
        </div>

        <!-------------------------------- NAVIGATION BAR ------------------------->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Navbar</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="home">Home<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="desktops">Desktops</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="laptops">Laptops</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="phones">Phones</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="accessories">Accessories</a>
                    </li>
                    <li>
                        <a class="nav-link" href="shopping-cart">Shopping
                            Cart</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="home">About</a>
                    </li>
                </ul>
            </div>
            <form class="d-flex" method="GET">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="searchTerm" required>
                <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
            </form>
        </nav>

        <div class="row">
            <div class="col-xs-7 col-sm-7 col-md-9 col-lg-9">
                <ul th:each="product,iter: ${productList}" style="list-style-type: none;">
                    <li>
                      <div class="row">
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                          <!-- product details -->
                          <ul>
                            <li style="list-style-type: none;"><b><span th:text="${product.name}"></span></b></li>
                            <li>ID: <span th:text="${product.id}"></span></li>
                            <li>Type: <span th:text="${product.type}"></span></li>
                            <li>Price: <span th:text="${product.price}"></span></li>
                            <li>Quantity: <span th:text="${product.quantity}"></span></li>
                            <li>Vendor: <span th:text="${product.vendor}"></span></li>
                            <li>Rating: <span th:text="${product.rating}"></span>/5</li>
                            <li>Index: <span th:text="${iter.index}"></span></li>
                            <li>Description: <span th:text="${product.description}"></span></li>
                            
                              <form action="#" th:action="@{/laptops}" th:object="${productDTO}" method="post">
                                <input type="hidden" th:attr="name='id'" th:value="${product.id}">
                                <input type="hidden" th:attr="name='name'" th:value="${product.name}">
                                <input type="hidden" th:attr="name='type'" th:value="${product.type}">
                                <input type="hidden" th:attr="name='description'" th:value="${product.description}">
                                <input type="hidden" th:attr="name='price'" th:value="${product.price}">
                                <input type="hidden" th:attr="name='quantity'" th:value="${product.quantity}">
                                <input type="hidden" th:attr="name='vendor'" th:value="${product.vendor}">
                                <input type="hidden" th:attr="name='rating'" th:value="${product.rating}">
                                <button type="submit" class="btn btn-primary" name="Submit">Add to Cart</button>
                              </form>
                            
                          </ul>
                        </div>
                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="display: flex; align-items: center;">
                          <!-- product image -->
                          <img src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=1170&amp;q=80" width="100%" height="auto" alt="Temp Picture" title="Temp Picture">
                        </div>
                      </div>
                    </li>
                  </ul>
                  
                  
    </div>
    <div class="col-xs-5 col-sm-5 col-md-3 col-lg-3" style="border: 1px solid lightgrey;">
        <div class="card">
            <div class="card-body">
                <h4>Filter</h4>
                <form>
                    <label class="my-1 mr-2" for="priceRange"><h6>Price $</h6></label>
                    <select class="custom-select my-1 mr-sm-2" id="priceRange" name="priceRange">
                      <option selected value="0">Choose...</option>
                      <option value="1">$0 &nbsp; &nbsp; - $200</option>
                      <option value="2">$200 - $400</option>
                      <option value="3">$400 - $700</option>
                      <option value="4">$700 - $1000</option>
                      <option value="5">$1000+</option>
                    </select>

                    <label class="my-1 mr-2" for="rating" ><h6>Rating</h6></label>
                    <select class="custom-select my-1 mr-sm-2" id="rating" name="rating">
                      <option selected value="0">Choose...</option>
                      <option value="1">1 Star or More</option>
                      <option value="2">2 Stars or More</option>
                      <option value="3">3 Stars or More</option>
                      <option value="4">4 Stars or More</option>
                      <option value="5">5 Stars or More</option>
                    </select>
   
            </div>
        </div>
            <div class="card">
                <div class="card-body">
                    <h4>Sort</h4>
                    <label class="my-1 mr-2" for="sortOrder" ><h6>Sort By</h6></label>
                    <select class="custom-select my-1 mr-sm-2" id="sortOrder" name="sortOrder">
                      <option selected value="0">Choose...</option>
                      <option value="nameAZ">Sort by Name (A-Z)</option>
                      <option value="nameZA">Sort by Name (Z-A)</option>
                      <option value="vendorAZ">Sort by Brand (A-Z)</option>
                      <option value="vendorZA">Sort by Brand (Z-A)</option>
                      <option value="priceLtoH">Sort by Price (Lowest to Highest)</option>
                      <option value="priceLtoH">Sort by Price (Highest to Lowest)</option>
                    </select>
                        <button type="submit" class="btn btn-secondary my-1">View</button>
                        <button type="button" class="btn btn-info" onclick="window.location.href='laptops'">Clear</button>
                      </form>
                    
                </div>
            </div>

    </div>


        <script type="text/javascript" th:inline="javascript">
            // Keeps the current scroll position after page reload
            document.addEventListener("DOMContentLoaded", function(event) {
                var scrollPosition = localStorage.getItem('scrollPosition');
                if (scrollPosition) window.scrollTo(0, scrollPosition);
            });

            window.onbeforeunload = function(e) {
                localStorage.setItem("scrollPosition", window.scrollY);
            };
        </script>

            <!-- NEEDED IN EVERY HTML FILE FOR BOOTSTRAP AND JQUERY TO WORK -->
            <!-- Optional JavaScript -->
            <!-- jQuery first, then Popper.js, then Bootstrap JS -->
            <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
                integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"></script>
            <script
                src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
                integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
                crossorigin="anonymous"></script>
            <script
                src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
                integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
                crossorigin="anonymous"></script>
            <!--Stores and Clears Filter/Sort values accordingly-->
            <script type="text/javascript" th:inline="javascript">

                    
                    //Clear session if no get request
                    if (window.location.href.match(/\=/g) === null) {
                        sessionStorage.clear();
                    }
                    
                    window.onload = function() {
                        //Retain Price Filter values
                        var price = sessionStorage.getItem("priceRange");                            
                        
                        if (price === null)
                            $('#priceRange').val("0");
                        else
                            $('#priceRange').val(price);

                        
                        $('#priceRange').change(function() { 
                            var sellPrice = $(this).val();
                            sessionStorage.setItem("priceRange", sellPrice);
                        });

                        //Retain Rating Filter values
                        var rating = sessionStorage.getItem("rating");

                        if(rating === null)
                            $('#rating').val("0");
                        else
                            $('#rating').val(rating);

                        $('#rating').change(function() { 
                            var curRate = $(this).val();
                            sessionStorage.setItem("rating", curRate);
                        });

                        //Retain Sort values
                        var sort = sessionStorage.getItem("sortOrder");

                        if (sort === null)
                            $('#sortOrder').val("0");
                        else
                            $('#sortOrder').val(sort);

                        $('#sortOrder').change(function() { 
                            var curSort = $(this).val();
                            sessionStorage.setItem("sortOrder", curSort);
                        });

                    };
                

            </script>

    </body>
</html>

